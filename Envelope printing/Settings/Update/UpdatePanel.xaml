<?xml version="1.0" encoding="utf-8"?>
<UserControl x:Class="Envelope_printing.UpdatePanel"
 xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
 xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
 xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
 xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
 mc:Ignorable="d"
 d:DesignHeight="380" d:DesignWidth="460">
 <Border Padding="12" Style="{StaticResource PanelBorder}">
 <StackPanel>
 
 <TextBlock Text="Обновления" FontWeight="SemiBold" FontSize="16"/>

 <StackPanel Orientation="Horizontal" Margin="0,8,0,0">
 <TextBlock Text="Текущая версия:"/>
 <TextBlock x:Name="CurrentVersionText" FontWeight="Bold" Margin="6,0,0,0"/>
 </StackPanel>

 <StackPanel Orientation="Horizontal" Margin="0,10,0,0">
 <Button x:Name="CheckButton" Content="Проверить" Width="110" Click="CheckButton_Click"/>
 </StackPanel>

 <ProgressBar x:Name="DownloadProgress" Margin="0,10,0,0" Height="10" Minimum="0" Maximum="100" Visibility="Collapsed"/>
 <TextBlock x:Name="StatusText" Margin="0,6,0,0" TextWrapping="Wrap"/>

 <!-- Инфо-блок: баннер с текстом, версия, изменения, кнопки -->
 <Border x:Name="UpdateInfoPanel" Background="{DynamicResource SurfaceAltBrush}" BorderBrush="{DynamicResource FieldBorderBrush}" BorderThickness="1" CornerRadius="6"
 Padding="10" Margin="0,10,0,0" Opacity="0" Visibility="Collapsed">
 <StackPanel>
 <!-- Баннер с сообщением и версией -->
 <Grid Height="160" ClipToBounds="True">
 <Border CornerRadius="6">
 <Border.Background>
 <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
 <GradientStop Color="#EAF2FF" Offset="0"/>
 <GradientStop Color="#DDE8FF" Offset="1"/>
 </LinearGradientBrush>
 </Border.Background>
 </Border>
 <!-- Опциональная картинка-подложка -->
 <Image x:Name="HeroImage" Stretch="UniformToFill" Opacity="0.15" Visibility="Collapsed"/>
 <StackPanel VerticalAlignment="Center" Margin="16">
 <TextBlock x:Name="HeadlineText" Text="Доступна новая версия" FontSize="26" FontWeight="Bold"/>
 <TextBlock x:Name="HeadlineVersionText" Text="" FontSize="18" FontWeight="SemiBold" Margin="0,4,0,0"/>
 </StackPanel>
 </Grid>

 <!-- Изменения: свертываемый блок с ограниченной высотой -->
 <Expander x:Name="ChangelogExpander" IsExpanded="False" Margin="0,10,0,0">
 <Expander.Header>
 <StackPanel Orientation="Horizontal">
 <TextBlock Text="Что нового" FontWeight="SemiBold"/>
 <TextBlock Text=" (раскрыть)" Margin="4,0,0,0"/>
 </StackPanel>
 </Expander.Header>
 <ScrollViewer MaxHeight="240" VerticalScrollBarVisibility="Auto">
 <TextBlock x:Name="ChangelogText" TextWrapping="Wrap" FontFamily="Consolas"/>
 </ScrollViewer>
 </Expander>

 <!-- Кнопки: скачать и варианты обновления -->
 <StackPanel Margin="0,10,0,0">
 <Button x:Name="DownloadButton" Content="Скачать" Width="160" Click="DownloadButton_Click" Visibility="Collapsed"/>
 <StackPanel x:Name="PostDownloadButtons" Orientation="Horizontal" Margin="0,10,0,0" Visibility="Collapsed">
 <Button x:Name="BtnUpdateNow" Content="Закрыть и обновить" Width="160" Click="BtnUpdateNow_Click"/>
 <Button x:Name="BtnUpdateAndReopen" Content="Обновить и открыть" Width="160" Margin="8,0,0,0" Click="BtnUpdateAndReopen_Click"/>
 <Button x:Name="BtnUpdateOnExit" Content="Обновить при выходе" Width="170" Margin="8,0,0,0" Click="BtnUpdateOnExit_Click"/>
 <Button x:Name="BtnSkip" Content="Пропустить" Width="110" Margin="8,0,0,0" Click="BtnSkip_Click"/>
 </StackPanel>
 </StackPanel>

 <Button x:Name="CancelButton" Content="Отмена" Width="90" Margin="0,10,0,0" Click="CancelButton_Click" Visibility="Collapsed"/>
 <Button x:Name="OpenFolderButton" Content="Открыть папку" Width="130" Margin="0,6,0,0" Click="OpenFolderButton_Click" Visibility="Collapsed"/>
 </StackPanel>
 </Border>
 </StackPanel>
 </Border>
</UserControl>